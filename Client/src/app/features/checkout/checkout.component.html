<div class="container">
  <div class="row gy-3">
    <div class="col-lg-9">
      <p-steps
        [model]="checkoutSteps"
        [activeIndex]="activeIndex"
        [readonly]="true"></p-steps>

      <div
        class="d-flex justify-content-between m-3"
        *ngrxLet="userAddress$ as userAddress">
        <p-button
          [style.visibility]="
            activeIndex === 0 || activeIndex === 3 ? 'hidden' : 'visible'
          "
          label="Previous"
          iconPos="left"
          icon="pi pi-arrow-left"
          styleClass="p-button-standart"
          (onClick)="handleStepsClick(false)"></p-button>
        <p-button
          *ngIf="activeIndex < 2"
          label="Next"
          iconPos="right"
          icon="pi pi-arrow-right"
          styleClass="p-button-warning"
          [disabled]="
            (!userAddress && activeIndex === 0) ||
            (!bState.selectedDeliveryMethod && activeIndex === 1)
          "
          (onClick)="handleStepsClick(true)"></p-button>
      </div>

      <div class="container p-2">
        <router-outlet></router-outlet>
      </div>
    </div>
    <div class="col-lg-3">
      <app-order-summary
        *ngIf="activeIndex !== 3"
        [disabled]="activeIndex !== 2"
        [itemsCount]="bState.basket.items.length"
        [shipping]="bState.shipping"
        [subtotal]="bState.subtotal"
        [total]="bState.total"
        [isPlacingOrder]="(isPlacingOrder$ | ngrxPush)!"
        (onOrderPlaced)="handlePlaceOrder()"></app-order-summary>
    </div>
  </div>
</div>
